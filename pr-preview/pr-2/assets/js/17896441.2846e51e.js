(self.webpackChunk=self.webpackChunk||[]).push([[918],{2326:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=2326,e.exports=t},9927:(e,t,a)=>{var n={"./docs/configuration/materializations/hive-ha.md":4372,"./docs/configuration/materializations/hive.md":9481,"./docs/configuration/materializations/iceberg.md":9136,"./docs/configuration/seeds.md":3836,"./docs/configuration/snapshots.md":9081,"./docs/configuration/table-configuration.md":835,"./docs/contributing/contributing.md":9482,"./docs/getting-started/athena-quickstart.md":6020,"./docs/getting-started/installation.md":9641,"./docs/getting-started/prerequisites/aws-resources.md":4047,"./docs/getting-started/prerequisites/iam-permissions.md":4632,"./docs/introduction.md":2057,"./docs/known-issues.md":7526};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=9927},10:(e,t)=>{t.W={exampleString:{name:"Example String",versions:[{name:"Old Example String",version:"0.21"}]},dbtTheProduct:{name:"dbt"},dbtCore:{name:"dbt Core"},dbtCloud:{name:"dbt Cloud"},dbtIDE:{name:"dbt Cloud IDE"}}},4264:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(7294),i=a(9960);const r={spotlightBreadcrumbs:"spotlightBreadcrumbs__PkY",spotlightBreadcrumbsContainer:"spotlightBreadcrumbsContainer_VFYU",spotlightMemberCard:"spotlightMemberCard_w9D4",spotlightMemberImgContainer:"spotlightMemberImgContainer_Dqn4",spotlightMemberContent:"spotlightMemberContent_uboK",spotlightMemberHeader:"spotlightMemberHeader_SmNC",spotlightMemberDescription:"spotlightMemberDescription_JRQG",spotlightMemberInfo:"spotlightMemberInfo_ElK1",spotlightMemberSocial:"spotlightMemberSocial_WcCe",spotlightReadMore:"spotlightReadMore_AN1d"};var o=function(e){var t=e.isSpotlightMember,a=e.frontMatter,o=e.children;return t?n.createElement(n.Fragment,null,n.createElement("div",{className:"blog-breadcrumbs "+r.spotlightBreadcrumbs},n.createElement("div",{className:"container "+r.spotlightBreadcrumbsContainer},n.createElement(i.Z,{to:"/",title:"Home"},"Home"),n.createElement(i.Z,{to:"/community/spotlight",title:"Community spotlight"},"Community spotlight"),(null==a?void 0:a.title)&&(null==a?void 0:a.id)&&n.createElement(i.Z,{to:"/community/spotlight/"+a.id,title:a.title},a.title))),n.createElement("header",{className:r.spotlightMemberCard},o)):n.createElement("div",{className:r.spotlightMemberCard},o)};const l=function(e){var t=e.frontMatter,a=e.isSpotlightMember,l=void 0!==a&&a,s=t.id,d=t.title,c=t.description,m=t.image,u=t.jobTitle,p=t.companyName,g=t.socialLinks;return n.createElement(o,{isSpotlightMember:l,frontMatter:t},m&&n.createElement("div",{className:r.spotlightMemberImgContainer},s&&l?n.createElement("img",{src:m,alt:d}):n.createElement(i.Z,{to:"/community/spotlight/"+s,className:r.spotlightMemberHeader},n.createElement("img",{src:m,alt:d}))),n.createElement("div",{className:r.spotlightMemberContent},!l&&s?n.createElement(i.Z,{to:"/community/spotlight/"+s,className:r.spotlightMemberHeader},d):n.createElement("h1",{className:r.spotlightMemberHeader},d),(u||p)&&n.createElement("div",{className:r.spotlightMemberInfo},n.createElement("span",null,u&&u,u&&p&&", ",p&&p)),c&&!l&&n.createElement("p",{className:r.spotlightMemberDescription},c),g&&l&&(null==g?void 0:g.length)>0&&n.createElement("div",{className:r.spotlightMemberSocial},g.map((function(e,t){return n.createElement(n.Fragment,null,(null==e?void 0:e.name)&&(null==e?void 0:e.link)&&n.createElement(n.Fragment,null,0!==t&&" | ",n.createElement("a",{href:e.link,title:"#"},e.name)))}))),s&&!l&&n.createElement(i.Z,{to:"/community/spotlight/"+s,className:r.spotlightReadMore},"Read More")))}},1347:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var n=a(7294),i=a(9960),r=a(4155),o=a(5108),l=r?r.env:{},s=a(9927),d={},c={};function m(e,t){if(!e)return{bad:!0,link:e};var a=e.split("#"),n=a[0],i=a[1];if(!n&&i)return{bad:!1,link:e};n&&!i&&(i="");var r=!!n.match(/https?:/)||!!n.match(/:/),s=function(e){var t=e.replace(/.md$/,"");t.startsWith("/")||(t="/"+t);var a=null;for(var n in c){var i=n.replace(/.md$/,"").endsWith(t);if(i&&!a)a=c[n];else if(i&&a){var r='Ambiguous link slug: "'+e+'"\n- Two matched:, "'+a.id+'", "'+c[n].id+'"';if(o.error(r),"build"==l.DOCS_ENV)throw new Error("Ambiguous link detected: "+r)}}return a}(n);if(s)return{bad:!1,link:s.permalink+"#"+i};if(d[n])return{bad:!1,link:d[n].permalink+"#"+i};if(!r&&!e.startsWith("/")){if("build"!=l.DOCS_ENV||t)return{bad:!0,link:e};throw o.log(" - Broken link detected "+e),new Error("Broken link")}return{bad:!1,link:e}}s.keys().forEach((function(e){var t=s(e).metadata;if(t){var a=t.id.split("/"),n=a[a.length-1];if(d[n]){var i="Duplicate slug found: "+n+"\n";i+=" - "+t.source+"\n",i+=" - "+d[n].source,o.error(i)}d[n]=t,c[t.source]=t}}));const u=function(e){var t=e.children,a=e.href,r=e.ignoreInvalid,o=e.className,l={},s=m(a,r),d=s.bad,c=s.link;return d&&(l.borderBottom="2px dashed #ff6961"),n.createElement(i.Z,{className:o,style:l,href:c},t)}},3859:(e,t,a)=>{"use strict";a.d(t,{Z:()=>C});var n=a(7462),i=a(7294),r=a(6010),o=a(6668),l=a(6412),s=a(7016),d=a(5448),c=a(3746),m=a(7054),u=a(5074),p=a(8002),g=a(9573);const h={codeBlockContent:"codeBlockContent_m3Ux",codeBlockTitle:"codeBlockTitle_P25_",codeBlock:"codeBlock_qGQc",codeBlockStandalone:"codeBlockStandalone_zC50",codeBlockLines:"codeBlockLines_p187",codeBlockLinesWithNumbering:"codeBlockLinesWithNumbering_OFgW",buttonGroup:"buttonGroup_6DOT"};var k=a(7099),b=a(1347);function f(e){var t=(0,k.Z)(/(\\?)\[(.*?)\]\((.*?)\)/,{escape:1,text:2,url:3}),a=e.match(t);if(a){var n="\\"==a.groups.escape,i=a[0],r=i.length;return n&&(i=i.substring(1)),{text:a.groups.text,url:a.groups.url,full:i,index:a.index,escape:n,original_length:r}}return null}function N(e,t){return t||(t=["text"]),{types:t,content:e}}function v(e){var t=function(e){for(var t,a,n=[],r=e;r.length>0;){var o=f(r);if(!o){n.length>0&&n.push(N(r));break}var l=r.slice(0,o.index),s=r.slice(o.index+o.original_length);n.push(N(l)),o.escape?n.push(N(o.full)):n.push((t=o.text,a=o.url,N(i.createElement(b.Z,{className:"code-link",href:a},t)))),r=s}return 0==n.length?null:n}(e.map((function(e){return e.content})).join(""));return t||e}function C(e){var t,a=e.children,k=e.className,b=void 0===k?"":k,f=e.metastring,N=e.title,C=e.showLineNumbers,y=e.language,w=(0,o.L)().prism,_=w.defaultLanguage,E=w.magicComments,A=null!=(t=null!=y?y:(0,s.Vo)(b))?t:_,I=(0,l.p)(),M=(0,d.F)(),S=(0,s.bc)(f)||N,T=(0,s.nZ)(a,{metastring:f,language:A,magicComments:E}),Z=T.lineClassNames,L=T.code,x=null!=C?C:(0,s.nt)(f);return i.createElement(g.Z,{as:"div",className:(0,r.Z)(b,A&&!b.includes("language-"+A)&&"language-"+A)},S&&i.createElement("div",{className:h.codeBlockTitle},S),i.createElement("div",{className:h.codeBlockContent},i.createElement(c.ZP,(0,n.Z)({},c.lG,{theme:I,code:L,language:null!=A?A:"text"}),(function(e){var t=e.className,a=e.tokens,n=e.getLineProps,o=e.getTokenProps;return i.createElement("pre",{tabIndex:0,ref:M.codeBlockRef,className:(0,r.Z)(t,h.codeBlock,"thin-scrollbar")},i.createElement("code",{className:(0,r.Z)(h.codeBlockLines,x&&h.codeBlockLinesWithNumbering)},a.map((function(e,t){var a=v(e);return i.createElement(m.Z,{key:t,line:a,getLineProps:n,getTokenProps:o,classNames:Z[t],showLineNumbers:x})}))))})),i.createElement("div",{className:h.buttonGroup},(M.isEnabled||M.isCodeScrollable)&&i.createElement(p.Z,{className:h.codeButton,onClick:function(){return M.toggle()},isEnabled:M.isEnabled}),i.createElement(u.Z,{className:h.codeButton,code:L}))))}},4001:(e,t,a)=>{"use strict";a.d(t,{Z:()=>B});var n=a(4165),i=a(5861),r=a(7294),o=a(6010),l=a(7524),s=a(5130),d=a(2400),c=a(3120),m=a(4364),u=a(5729),p=a(5281),g=a(235),h=a(5042),k=a(4264);function b(e){var t,a=e.children,n=function(){var e=(0,s.k)(),t=e.metadata,a=e.frontMatter,n=e.contentTitle;return a.hide_title||void 0!==n?null:t.title}(),i=(0,s.k)(),l=i.metadata,d=i.frontMatter,c=null==l||null==(t=l.id)?void 0:t.includes("community/spotlight/");return r.createElement("div",{className:(0,o.Z)(p.k.docs.docMarkdown,"markdown")},n&&r.createElement(r.Fragment,null,c?r.createElement(k.Z,{frontMatter:d,isSpotlightMember:!0}):r.createElement("header",null,r.createElement(g.Z,{as:"h1"},n))),r.createElement(h.Z,null,a))}var f=a(4149);const N={docItemContainer:"docItemContainer_c0TR",docItemCol:"docItemCol_z5aJ",tocMobile:"tocMobile_EDxc",tocLoader:"tocLoader_BolO"},v={customSearchWeight:"customSearchWeight_fp9e"};const C=function(e){var t,a=e.weight,n=["light","medium","heavy"];if(a?"light"==a?t=25:"medium"==a?t=50:"heavy"==a&&(t=100):t=0,a&&!n.includes(a))throw"Invalid value for search_weight: "+a+". Allowed values are: "+n.join(", ")+".";return r.createElement("div",{className:v.customSearchWeight+" algolia-custom-search-weight"},t)};var y=a(7462),w=a(3366),_=a(3743);const E={tableOfContents:"tableOfContents_jeP5",docItemContainer:"docItemContainer_hgFs"};var A=a(324);a(2263);function I(e){e.cta;return!1}var M=["className","featured_cta","editUrl"],S="table-of-contents__link toc-highlight",T="table-of-contents__link--active";function Z(e){var t=e.className,a=e.featured_cta,n=e.editUrl,i=(0,w.Z)(e,M);return r.createElement("div",{className:(0,o.Z)(E.tableOfContents,"thin-scrollbar",t)},r.createElement(_.Z,(0,y.Z)({},i,{linkClassName:S,linkActiveClassName:T})),n&&r.createElement("div",{className:"col margin-top--sm"},r.createElement(A.Z,{editUrl:n})),a&&r.createElement(I,{cta:a}))}var L=a(2943),x=a(7892);function D(e){return new Promise((function(t){var a=0,n=setInterval((function(){var i=document.querySelectorAll(e);a<10?i&&i.length?(t(i),clearInterval(n)):a++:clearInterval(n)}),500)}))}function q(){if(window.location.hash){var e=document.getElementById(window.location.hash.replace("#",""));if(e){var t=document.getElementsByClassName("navbar")[0];t.classList.add("navbarHiddenOnLoad");var a=0;window.addEventListener("scroll",(function(){document.body.getBoundingClientRect().top>a&&t.classList.remove("navbarHiddenOnLoad"),a=document.body.getBoundingClientRect().top})),e.scrollIntoView()}}}function B(e){var t=e.children,a=function(){var e=(0,s.k)(),t=e.frontMatter,a=e.toc,d=e.metadata,c=(null==t?void 0:t.cta)&&t.cta,m=(0,r.useContext)(x.Z).version,u=(0,r.useState)(a),g=u[0],h=u[1],k=(0,r.useState)(!0),b=k[0],f=k[1];(0,r.useEffect)((function(){function e(){return(e=(0,i.Z)((0,n.Z)().mark((function e(){var t,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(".markdown h1, .markdown h2, .markdown h3, .markdown h4, .markdown h5, .markdown h6");case 2:t=e.sent,a&&t&&t.length?(i=Array.from(t).reduce((function(e,t){var n=a.find((function(e){return e.id.includes(t.id)})),i=function(e){var t;return t="H2"===e.nodeName?2:"H3"===e.nodeName?3:null,{value:e.innerHTML,id:e.id,level:t&&t}};return n?e.push(i(t)):n||e.push(i(t)),e}),[]),g.length!==i.length?(f(!1),setTimeout((function(){h(i),f(!0)}),500)):f(!0)):f(!0),q();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,m]);var v=(0,l.i)(),C=t.hide_table_of_contents,y=!C&&a.length>0;return{hidden:C,mobile:y?r.createElement(L.Z,{toc:g,minHeadingLevel:t.toc_min_heading_level,maxHeadingLevel:t.toc_max_heading_level,className:(0,o.Z)(p.k.docs.docTocMobile,N.tocMobile)}):void 0,desktop:!y||"desktop"!==v&&"ssr"!==v?void 0:r.createElement(r.Fragment,null,b?r.createElement(Z,{toc:g,minHeadingLevel:t.toc_min_heading_level,maxHeadingLevel:t.toc_max_heading_level,className:p.k.docs.docTocDesktop,featured_cta:c&&c,editUrl:(null==d?void 0:d.editUrl)&&d.editUrl}):r.createElement("img",{className:N.tocLoader,src:"/img/loader-icon.svg",alt:"Loading",title:"Loading"}))}}(),g=(0,s.k)().frontMatter,h=(null==g?void 0:g.search_weight)&&g.search_weight;return r.createElement("div",{className:"row"},r.createElement("div",{className:(0,o.Z)("col",!a.hidden&&N.docItemCol)},r.createElement(c.Z,null),r.createElement("div",{className:N.docItemContainer},r.createElement("article",null,r.createElement(f.Z,null),r.createElement(m.Z,null),a.mobile,r.createElement(b,null,t),r.createElement(C,{weight:h}),r.createElement(u.Z,null)),r.createElement(d.Z,null))),a.desktop&&r.createElement("div",{className:"col col--3"},a.desktop))}},5440:(e,t,a)=>{"use strict";a.d(t,{Z:()=>J});var n=a(7462),i=a(7294),r=a(8227),o=a(9870),l=a(1925),s=a(7124),d=a(8231),c=a(7969),m=a(372),u=a(1108),p=a(1875),g=a(7928),h=a(2905);const k=function(e){var t=e.children,a=e.expand,n=(0,i.useState)(a),r=n[0],o=n[1];return i.createElement("div",{style:{marginBottom:"10px"}},i.createElement("span",{onClick:function(){o(!r)}},r?"\u25bc":"\u25b6",i.createElement("span",{style:{cursor:"pointer",fontStyle:"italic",marginLeft:"5px"}},"Changelog")),r&&i.createElement("div",{style:{borderLeft:"1px solid #ccc",paddingLeft:"10px",marginLeft:"5px"}},t))};const b=function(e){var t,a=e.children,n=[],r=a.map((function(e,a){if(null==e.props.warehouse||""==e.props.warehouse)throw"Expected warehouse prop to be defined for each child of WHCode component";return n.push({label:e.props.warehouse,value:e.props.warehouse}),t=e.props.warehouse,i.createElement(h.Z,{key:a,value:t},e)}));return i.createElement(g.Z,{defaultValue:n[0].value,values:n},r)};const f=function(e){var t=e.children,a=e.header,n=e.description,r=e.expand,o=(0,i.useState)(r),l=o[0],s=o[1];return i.createElement(i.Fragment,null,i.createElement("h2",{onClick:function(){s(!l)}},a,l?" -":" +"),l?t:i.createElement("span",null,n||"Click to expand"))};const N=function(e){e.src,e.alt_header};var v=a(2326),C=[];v.keys().forEach((function(e,t){if(!e.endsWith("index.md")){var a=v(e),n=a.metadata,r=a.default({});C.push(i.createElement("div",{key:e,style:{marginBottom:"10px"}},i.createElement("h2",null,i.createElement("a",{className:"hash-link-faq",href:n.permalink},"#"),t+1,". ",n.title),i.createElement("div",null,r)))}}));const y=function(e){var t=e.style;return i.createElement("div",{style:t},C)},w={wrapper:"wrapper_V0Zw",title:"title_BmGx",titleInner:"titleInner_QNi1",icon:"icon_E6qs"};const _=function(e){var t=e.children,a=e.name;return i.createElement("div",{className:w.wrapper},i.createElement("div",{className:w.title},i.createElement("div",{className:w.titleInner},i.createElement("svg",{className:w.icon,viewBox:"0 0 12 16",version:"1.1",width:"12",height:"16","aria-hidden":"true"},i.createElement("path",{fillRule:"evenodd",d:"M7.5 5L10 7.5 7.5 10l-.75-.75L8.5 7.5 6.75 5.75 7.5 5zm-3 0L2 7.5 4.5 10l.75-.75L3.5 7.5l1.75-1.75L4.5 5zM0 13V2c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v11c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1zm1 0h10V2H1v11z"})),i.createElement("span",null,a))),t)},E={title:"title_aGrV",docImage:"docImage_EYbW",collapsed:"collapsed_c_O2",leftAlignLightbox:"leftAlignLightbox_GhD4",rightAlignLightbox:"rightAlignLightbox_Ntwk"};const A=function(e){var t=e.src,a=e.collapsed,n=void 0!==a&&a,r=e.alignment,o=void 0===r?"center":r,l=e.alt,s=void 0===l?void 0:l,d=e.title,c=void 0===d?void 0:d,m=e.width,u=void 0===m?void 0:m,p="";return"left"===o?p=E.leftAlignLightbox:"right"===o&&(p=E.rightAlignLightbox),i.createElement(i.Fragment,null,i.createElement("link",{href:"/css/featherlight-styles.css",type:"text/css",rel:"stylesheet"}),i.createElement("span",{className:"\n          "+E.docImage+" \n          "+(n?E.collapsed:"")+"\n          "+p+"\n        ",style:u&&{maxWidth:u}},i.createElement("span",null,i.createElement("a",{href:"#","data-featherlight":t},i.createElement("img",{"data-toggle":"lightbox",alt:s||(c||""),title:c||"",src:t}))),c&&i.createElement("span",{className:E.title},c)))};var I=a(1347);const M=function(e){var t=e.id;return i.createElement("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/"+t,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,webkitallowfullscreen:"true",mozallowfullscreen:"true"})};var S=a(7892);var T=a(10);const Z={Hero:"Hero__R2D",showGraphic:"showGraphic_RANd",w60:"w60_w_dw"};const L=function(e){var t=e.heading,a=e.subheading,n=e.showGraphic,r=void 0!==n&&n,o=e.customStyles,l=void 0===o?{}:o,s=e.classNames,d=void 0===s?"":s;return i.createElement("header",{className:" "+Z.Hero+" container-fluid "+(d||""),style:l&&l},r&&i.createElement("div",{className:Z.showGraphic}),i.createElement("div",{className:"container"},i.createElement("div",{className:"row justify-content-center"},i.createElement("div",{className:"col col--7"},i.createElement("h1",null,t),i.createElement("p",null,a)))))},x={card:"card_zHBt",cardWrapper:"cardWrapper_ahrI",cardBody:"cardBody_kmAY",icon:"icon_NBR_","dbt-core":"dbt-core_ACcc"};var D=a(4996),q=a(9960),B=a(2949);const U=function(e){var t=e.title,a=e.body,n=e.link,r=e.icon,o=(0,B.I)().colorMode,l=x[r]||"";return i.createElement("div",{className:x.cardWrapper},n?i.createElement(q.Z,{to:(0,D.Z)(n)},i.createElement("article",{className:x.card},r&&i.createElement("img",{src:"dark"===o?"/img/icons/white/"+r+".svg":"/img/icons/"+r+".svg",alt:"",className:x.icon+" "+l}),i.createElement("h3",null,t),i.createElement("div",{className:x.cardBody,dangerouslySetInnerHTML:{__html:a}}))):i.createElement("article",{className:x.card},r&&i.createElement("img",{src:"dark"===o?"/img/icons/white/"+r+".svg":"/img/icons/"+r+".svg",alt:"",className:x.icon+" "+l}),i.createElement("h3",null,t),i.createElement("div",{className:x.cardBody,dangerouslySetInnerHTML:{__html:a}})))},z={Callout:"Callout_WUJD",button:"button_pINe"};const W=function(e){var t=e.heading,a=e.subheading,n=e.cta,r=e.link;return i.createElement("div",{className:z.Callout+" container-fluid"},i.createElement("div",{className:"container"},i.createElement("div",{className:"row justify-content-center"},i.createElement("div",{className:"col col--8"},i.createElement("h2",null,t),i.createElement("p",null,a),i.createElement(q.Z,{to:(0,D.Z)(r)},i.createElement("a",{className:z.button},n))))))},P={card:"card_aplB",imageCard:"imageCard_Hwor",contentContainer:"contentContainer_Xdtd",imageContentContainer:"imageContentContainer_zgnx",cardWrapper:"cardWrapper_QTE7",ctaLink:"ctaLink_m8jo",icon:"icon_Vlli",readingTime:"readingTime_hHWo"};const O=function(e){var t=e.postMetaData,a=t.title,n=t.date,r=t.readingTime,o=(t.description,t.link),l=t.image;return i.createElement("div",{className:P.cardWrapper},i.createElement("article",{className:""+(l?P.imageCard:P.card)},l&&i.createElement("div",{className:P.imageContentContainer,style:{background:"no-repeat center/100% url("+l+")"}}),i.createElement("div",{className:P.contentContainer+" "+(l?P.imageContentContainer:null)},i.createElement(q.Z,{to:(0,D.Z)(o)},i.createElement("h3",null,a)),r&&i.createElement("span",{className:P.readingTime},n," \xb7 ",r," minute read"),i.createElement(q.Z,{className:P.ctaLink,to:(0,D.Z)(o)},"Read more"))))};var H=a(719),G=a(965);const F=function(e){var t=e.blogPostData;return i.createElement("div",null,i.createElement(H.tq,{spaceBetween:30,slidesPerView:1,effect:"fade",navigation:!0,modules:[G.W_],breakpoints:{640:{slidesPerView:2,spaceBetween:30},1024:{slidesPerView:3,spaceBetween:30}}},t.map((function(e){return i.createElement(H.o5,null,i.createElement(O,{postMetaData:e}))}))))};var R=a(4264),X=a(5742),V=a(2263),j=a(2190),Q="Community spotlight",Y="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.";const K=function(e){var t=e.spotlightData,a=(0,V.Z)().siteConfig,n=Q+(null!=a&&a.title?" | "+a.title:"");return i.createElement(j.Z,null,i.createElement(X.Z,null,i.createElement("title",null,n),i.createElement("meta",{property:"og:title",content:n}),i.createElement("meta",{property:"og:description",content:Y})),i.createElement(L,{heading:Q,subheading:Y,showGraphic:!1,customStyles:{marginBottom:0},classNames:"community-spotlight-hero"}),i.createElement("section",{id:"spotlight-members-section"},i.createElement("div",{className:"container"},t&&t.length>0?i.createElement(i.Fragment,null,t.map((function(e,t){return i.createElement(R.Z,{frontMatter:e.data,key:t})}))):i.createElement("p",null,"No community spotlight members are available at this time. \ud83d\ude15"))))};const J={head:r.Z,code:o.Z,a:function(e){return i.createElement(I.Z,e)},pre:l.Z,details:s.Z,ul:c.Z,img:m.Z,h1:function(e){return i.createElement(d.Z,(0,n.Z)({as:"h1"},e))},h2:function(e){return i.createElement(d.Z,(0,n.Z)({as:"h2"},e))},h3:function(e){return i.createElement(d.Z,(0,n.Z)({as:"h3"},e))},h4:function(e){return i.createElement(d.Z,(0,n.Z)({as:"h4"},e))},h5:function(e){return i.createElement(d.Z,(0,n.Z)({as:"h5"},e))},h6:function(e){return i.createElement(d.Z,(0,n.Z)({as:"h6"},e))},admonition:u.Z,mermaid:p.Z,BlogPostCard:O,Callout:W,Card:U,Changelog:k,Collapsible:f,FAQ:N,FAQList:y,File:_,Hero:L,Lightbox:A,Link:I.Z,PostCarousel:F,Tabs:g.Z,TabItem:h.Z,WHCode:b,YoutubeVideo:M,VersionBlock:function(e){var t=e.firstVersion,a=void 0===t?0:t,n=e.lastVersion,r=void 0===n?void 0:n,o=e.children,l=(0,i.useContext)(S.Z).version,s=(0,i.useState)(!0),d=s[0],c=s[1];if((0,i.useEffect)((function(){l&&c(!1)}),[l]),l){var m=parseFloat(l),u=parseFloat(a);if(r){if(m>parseFloat(r)||m<u)return null}else if(m<u)return null}return d?null:i.createElement(i.Fragment,null,o)},Var:function(e){var t=e.name;if(!t)return null;var a=(0,i.useState)(""),n=a[0],r=a[1],o=(0,i.useContext)(S.Z).version,l=T.W[t];return l?((0,i.useEffect)((function(){var e;if(null!=l&&null!=(e=l.versions)&&e.length&&o){var t=l.versions.sort((function(e,t){return parseFloat(e.version)>parseFloat(t.version)?1:-1})).find((function(e){return parseFloat(e.version)>=parseFloat(o)}));r(t?t.name:l.name)}else r(l.name)}),[o]),i.createElement("span",null,n)):null},CommunitySpotlightCard:R.Z,CommunitySpotlightList:K}},4372:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>d,toc:()=>m});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=["components"],l={title:"High-availability Hive table",id:"hive-ha"},s=void 0,d={unversionedId:"docs/configuration/materializations/hive-ha",id:"docs/configuration/materializations/hive-ha",title:"High-availability Hive table",description:"",source:"@site/docs/docs/configuration/materializations/hive-ha.md",sourceDirName:"docs/configuration/materializations",slug:"/docs/configuration/materializations/hive-ha",permalink:"/pr-preview/pr-2/docs/configuration/materializations/hive-ha",draft:!1,editUrl:"https://github.com/dbt-athena/dbt-athena.github.io/edit/current/docs/docs/configuration/materializations/hive-ha.md",tags:[],version:"current",lastUpdatedAt:1682711864,formattedLastUpdatedAt:"Apr 28, 2023",frontMatter:{title:"High-availability Hive table",id:"hive-ha"},sidebar:"docs",previous:{title:"Hive table",permalink:"/pr-preview/pr-2/docs/configuration/materializations/hive"},next:{title:"Iceberg table",permalink:"/pr-preview/pr-2/docs/configuration/materializations/iceberg"}},c={},m=[],u={toc:m},p="wrapper";function g(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}))}g.isMDXComponent=!0},9481:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>d,toc:()=>m});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=["components"],l={title:"Hive table",id:"hive"},s=void 0,d={unversionedId:"docs/configuration/materializations/hive",id:"docs/configuration/materializations/hive",title:"Hive table",description:"",source:"@site/docs/docs/configuration/materializations/hive.md",sourceDirName:"docs/configuration/materializations",slug:"/docs/configuration/materializations/hive",permalink:"/pr-preview/pr-2/docs/configuration/materializations/hive",draft:!1,editUrl:"https://github.com/dbt-athena/dbt-athena.github.io/edit/current/docs/docs/configuration/materializations/hive.md",tags:[],version:"current",lastUpdatedAt:1682711864,formattedLastUpdatedAt:"Apr 28, 2023",frontMatter:{title:"Hive table",id:"hive"},sidebar:"docs",previous:{title:"Table configuration",permalink:"/pr-preview/pr-2/docs/configuration/table-configuration"},next:{title:"High-availability Hive table",permalink:"/pr-preview/pr-2/docs/configuration/materializations/hive-ha"}},c={},m=[],u={toc:m},p="wrapper";function g(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}))}g.isMDXComponent=!0},9136:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>d,toc:()=>m});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=["components"],l={title:"Iceberg table",id:"iceberg"},s="Apache Iceberg",d={unversionedId:"docs/configuration/materializations/iceberg",id:"docs/configuration/materializations/iceberg",title:"Iceberg table",description:"Athena supports read, time travel, write, and DDL queries for Apache Iceberg tables that use the Apache Parquet format for data and the AWS Glue catalog for their metastore.",source:"@site/docs/docs/configuration/materializations/iceberg.md",sourceDirName:"docs/configuration/materializations",slug:"/docs/configuration/materializations/iceberg",permalink:"/pr-preview/pr-2/docs/configuration/materializations/iceberg",draft:!1,editUrl:"https://github.com/dbt-athena/dbt-athena.github.io/edit/current/docs/docs/configuration/materializations/iceberg.md",tags:[],version:"current",lastUpdatedAt:1682711864,formattedLastUpdatedAt:"Apr 28, 2023",frontMatter:{title:"Iceberg table",id:"iceberg"},sidebar:"docs",previous:{title:"High-availability Hive table",permalink:"/pr-preview/pr-2/docs/configuration/materializations/hive-ha"},next:{title:"Seeds",permalink:"/pr-preview/pr-2/docs/configuration/seeds"}},c={},m=[{value:"Getting started",id:"getting-started",level:2},{value:"Incremental tables",id:"incremental-tables",level:2}],u={toc:m},p="wrapper";function g(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"apache-iceberg"},"Apache Iceberg"),(0,r.kt)("p",null,"Athena supports read, time travel, write, and DDL queries for Apache Iceberg tables that use the Apache Parquet format for data and the AWS Glue catalog for their metastore."),(0,r.kt)("p",null,"Apache Iceberg is an open table format for very large analytic datasets. Iceberg manages large collections of files as tables, and it supports modern analytical data lake operations such as record-level insert, update, delete, and time travel queries. The Iceberg specification allows seamless table evolution such as schema and partition evolution and is designed for optimized usage on Amazon S3. Iceberg also helps guarantee data correctness under concurrent write scenarios."),(0,r.kt)("p",null,"The dbt-athena adapter supports table materialization for Apache Iceberg."),(0,r.kt)("h2",{id:"getting-started"},"Getting started"),(0,r.kt)("p",null,"To get started, add the following config block to your model:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"{{\n  config(\n    materialized='table',\n    table_type='iceberg',\n    format='parquet',\n    partitioned_by=['bucket(user_id, 5)'],\n    table_properties={\n      'optimize_rewrite_delete_file_threshold': '2'\n    }\n  )\n}}\n\nSELECT\n    'A' AS user_id,\n    'pi' AS name,\n    'active' AS status,\n    17.89 AS cost,\n    1 AS quantity,\n    100000000 AS quantity_big,\n    current_date AS my_date\n")),(0,r.kt)("p",null,"Iceberg supports ",(0,r.kt)("strong",{parentName:"p"},"bucketing")," as hidden partitions, therefore use the ",(0,r.kt)("inlineCode",{parentName:"p"},"partitioned_by")," config to add specific bucketing conditions."),(0,r.kt)("p",null,"Iceberg supports several ",(0,r.kt)("strong",{parentName:"p"},"table formats")," for data : ",(0,r.kt)("inlineCode",{parentName:"p"},"PARQUET"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"AVRO")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"ORC"),"."),(0,r.kt)("h2",{id:"incremental-tables"},"Incremental tables"),(0,r.kt)("p",null,"It is possible to use iceberg in an incremental materialization. Two strategies are supported:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"append"),": new records are appended to the table, this can lead to duplicates"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"merge"),": must be used in combination with ",(0,r.kt)("inlineCode",{parentName:"li"},"unique_key"),".\nIt performs an upsert: new records are added, and records that already existed, are updated. If\n",(0,r.kt)("inlineCode",{parentName:"li"},"delete_condition")," is provided in the model config, it can also delete records based on the\nprovided condition (SQL condition). You can use any column of the incremental table (",(0,r.kt)("inlineCode",{parentName:"li"},"src"),") or\nthe final table (",(0,r.kt)("inlineCode",{parentName:"li"},"target"),"). You must prefix the column by the name of the table to prevent\n",(0,r.kt)("inlineCode",{parentName:"li"},"Column is ambiguous")," error.")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("inlineCode",{parentName:"p"},"MERGE INTO")," is transactional and is supported only for Apache Iceberg tables in ",(0,r.kt)("strong",{parentName:"p"},"Athena engine version 3"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"{{\n  config(\n    materialized='incremental',\n    table_type='iceberg',\n    incremental_strategy='merge',\n    unique_key='user_id',\n    delete_condition=\"src.status != 'active' and target.my_date < now() - interval '2' year\"\n    format='parquet',\n  )\n}}\n\nSELECT\n    'A' AS user_id,\n    'pi' AS name,\n    'active' AS status,\n    17.89 AS cost,\n    1 AS quantity,\n    100000000 AS quantity_big,\n    current_date AS my_date\n")))}g.isMDXComponent=!0},3836:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>d,toc:()=>m});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=["components"],l={title:"Seeds",id:"seeds"},s=void 0,d={unversionedId:"docs/configuration/seeds",id:"docs/configuration/seeds",title:"Seeds",description:"",source:"@site/docs/docs/configuration/seeds.md",sourceDirName:"docs/configuration",slug:"/docs/configuration/seeds",permalink:"/pr-preview/pr-2/docs/configuration/seeds",draft:!1,editUrl:"https://github.com/dbt-athena/dbt-athena.github.io/edit/current/docs/docs/configuration/seeds.md",tags:[],version:"current",lastUpdatedAt:1682711864,formattedLastUpdatedAt:"Apr 28, 2023",frontMatter:{title:"Seeds",id:"seeds"},sidebar:"docs",previous:{title:"Iceberg table",permalink:"/pr-preview/pr-2/docs/configuration/materializations/iceberg"},next:{title:"Snapshots",permalink:"/pr-preview/pr-2/docs/configuration/snapshots"}},c={},m=[],u={toc:m},p="wrapper";function g(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}))}g.isMDXComponent=!0},9081:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>d,toc:()=>m});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=["components"],l={title:"Snapshots",id:"snapshots"},s=void 0,d={unversionedId:"docs/configuration/snapshots",id:"docs/configuration/snapshots",title:"Snapshots",description:"",source:"@site/docs/docs/configuration/snapshots.md",sourceDirName:"docs/configuration",slug:"/docs/configuration/snapshots",permalink:"/pr-preview/pr-2/docs/configuration/snapshots",draft:!1,editUrl:"https://github.com/dbt-athena/dbt-athena.github.io/edit/current/docs/docs/configuration/snapshots.md",tags:[],version:"current",lastUpdatedAt:1682711864,formattedLastUpdatedAt:"Apr 28, 2023",frontMatter:{title:"Snapshots",id:"snapshots"},sidebar:"docs",previous:{title:"Seeds",permalink:"/pr-preview/pr-2/docs/configuration/seeds"},next:{title:"Known issues",permalink:"/pr-preview/pr-2/docs/known-issues"}},c={},m=[],u={toc:m},p="wrapper";function g(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}))}g.isMDXComponent=!0},835:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>d,toc:()=>m});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=["components"],l={title:"Table configuration",id:"table-configuration"},s=void 0,d={unversionedId:"docs/configuration/table-configuration",id:"docs/configuration/table-configuration",title:"Table configuration",description:"Model configuration",source:"@site/docs/docs/configuration/table-configuration.md",sourceDirName:"docs/configuration",slug:"/docs/configuration/table-configuration",permalink:"/pr-preview/pr-2/docs/configuration/table-configuration",draft:!1,editUrl:"https://github.com/dbt-athena/dbt-athena.github.io/edit/current/docs/docs/configuration/table-configuration.md",tags:[],version:"current",lastUpdatedAt:1682711864,formattedLastUpdatedAt:"Apr 28, 2023",frontMatter:{title:"Table configuration",id:"table-configuration"},sidebar:"docs",previous:{title:"Installation",permalink:"/pr-preview/pr-2/docs/getting-started/installation"},next:{title:"Hive table",permalink:"/pr-preview/pr-2/docs/configuration/materializations/hive"}},c={},m=[{value:"Model configuration",id:"model-configuration",level:2},{value:"Table data location",id:"table-data-location",level:2},{value:"Incremental table models",id:"incremental-table-models",level:2},{value:"On schema change",id:"on-schema-change",level:3}],u={toc:m},p="wrapper";function g(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"model-configuration"},"Model configuration"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"materialized")),(0,r.kt)("td",{parentName:"tr",align:null},"A table materialization like ",(0,r.kt)("inlineCode",{parentName:"td"},"table"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"incremental"),", ",(0,r.kt)("a",{parentName:"td",href:"docs/configuration/materializations/hive-ha"},(0,r.kt)("inlineCode",{parentName:"a"},"table_hive_ha"))),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"s3_data_naming")),(0,r.kt)("td",{parentName:"tr",align:null},"An optional naming policy for the data on S3. See ",(0,r.kt)("a",{parentName:"td",href:"#table-data-location"},"Table data location"),"."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"schema_table_unique"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"external_location")),(0,r.kt)("td",{parentName:"tr",align:null},"If set, the full S3 path in which the table will be saved. (Does not work with Iceberg table)."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"none"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"partitioned_by")),(0,r.kt)("td",{parentName:"tr",align:null},"An array list of columns by which the table will be partitioned. \u26a0\ufe0f ",(0,r.kt)("a",{parentName:"td",href:"https://docs.aws.amazon.com/athena/latest/ug/ctas-considerations-limitations.html#ctas-considerations-limitations-partition-and-bucket-limits"},"Limited to the creation of 100 partitions"),"."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"none"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"bucketed_by")),(0,r.kt)("td",{parentName:"tr",align:null},"An array list of columns to bucket the data. This is ignored when using Iceberg. Example: ",(0,r.kt)("inlineCode",{parentName:"td"},"[org_id]")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"none"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"bucket_count")),(0,r.kt)("td",{parentName:"tr",align:null},"The number of buckets for bucketing your data. This is ignored when using Iceberg. Example: ",(0,r.kt)("inlineCode",{parentName:"td"},"1"),"."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"none"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"table_type")),(0,r.kt)("td",{parentName:"tr",align:null},"The type of table in Athena. Supports ",(0,r.kt)("inlineCode",{parentName:"td"},"hive")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"iceberg")," values."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"hive"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"format")),(0,r.kt)("td",{parentName:"tr",align:null},"The data format for the table. Supports ",(0,r.kt)("inlineCode",{parentName:"td"},"ORC"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"PARQUET"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"AVRO"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"JSON"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"TEXTFILE"),"."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"PARQUET"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"write_compression")),(0,r.kt)("td",{parentName:"tr",align:null},"The compression type to use for any storage format that allows compression to be specified. To see which options are available, see ",(0,r.kt)("a",{parentName:"td",href:"https://docs.aws.amazon.com/athena/latest/ug/create-table-as.html"},"CREATE TABLE AS"),". Example: ",(0,r.kt)("inlineCode",{parentName:"td"},"SNAPPY"),"."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"none"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"field_delimiter")),(0,r.kt)("td",{parentName:"tr",align:null},"Custom field delimiter. Used when the format is set to ",(0,r.kt)("inlineCode",{parentName:"td"},"TEXTFILE"),". See ",(0,r.kt)("a",{parentName:"td",href:"https://docs.aws.amazon.com/athena/latest/ug/create-table-as.html"},"CREATE TABLE AS"),". Example: ",(0,r.kt)("inlineCode",{parentName:"td"},"','")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"none"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"table_properties")),(0,r.kt)("td",{parentName:"tr",align:null},"Additional table properties to add to the table. Valid for Iceberg only. Example: ",(0,r.kt)("inlineCode",{parentName:"td"},"{'optimize_rewrite_delete_file_threshold': '2'}")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"none"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"lf_tags")),(0,r.kt)("td",{parentName:"tr",align:null},"Lake Formation tags for metadata access control, to associate to the table. Example: ",(0,r.kt)("inlineCode",{parentName:"td"},'{"tag1":{"tag1": "value1", "tag2": "value2"}')),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"none"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"lf_tags_columns")),(0,r.kt)("td",{parentName:"tr",align:null},"Lake Formation tags for metadata access control, to associate to columns. Example: ",(0,r.kt)("inlineCode",{parentName:"td"},'{"tag1": {"value1": ["column1": "column2"]}}')),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"none"))))),(0,r.kt)("h2",{id:"table-data-location"},"Table data location"),(0,r.kt)("p",null,"The S3 location in which table data is saved, is determined by:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"If ",(0,r.kt)("inlineCode",{parentName:"li"},"external_location")," is defined, that value is used."),(0,r.kt)("li",{parentName:"ol"},"If ",(0,r.kt)("inlineCode",{parentName:"li"},"s3_data_dir")," is defined, the path is determined by this value and ",(0,r.kt)("inlineCode",{parentName:"li"},"s3_data_naming"),"."),(0,r.kt)("li",{parentName:"ol"},"If no ",(0,r.kt)("inlineCode",{parentName:"li"},"s3_data_dir")," is defined, the data is stored under ",(0,r.kt)("inlineCode",{parentName:"li"},"s3_staging_dir/tables/"),".")),(0,r.kt)("p",null,"The options for ",(0,r.kt)("inlineCode",{parentName:"p"},"s3_data_naming")," are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"uuid")),": ",(0,r.kt)("inlineCode",{parentName:"li"},"{s3_data_dir}/{uuid4()}/")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"table_table")),": ",(0,r.kt)("inlineCode",{parentName:"li"},"{s3_data_dir}/{table}/")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"table_unique")),": ",(0,r.kt)("inlineCode",{parentName:"li"},"{s3_data_dir}/{table}/{uuid4()}/")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"schema_table")),": ",(0,r.kt)("inlineCode",{parentName:"li"},"{s3_data_dir}/{schema}/{table}/")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"schema_table_unique")),": ",(0,r.kt)("inlineCode",{parentName:"li"},"{s3_data_dir}/{schema}/{table}/{uuid4()}/"))),(0,r.kt)("p",null,"It's possible to set the ",(0,r.kt)("inlineCode",{parentName:"p"},"s3_data_naming")," globally in the ",(0,r.kt)("inlineCode",{parentName:"p"},"profile.yml"),", set it for a group of models in the ",(0,r.kt)("inlineCode",{parentName:"p"},"dbt_project.yml")," or overwrite the value for a specific model in the config block."),(0,r.kt)("admonition",{title:"Work group with default output location",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"When using an Athena workgroup with a default output location configured, ",(0,r.kt)("inlineCode",{parentName:"p"},"s3_data_naming")," and any configured buckets are ignored and the location configured in the work group is used.")),(0,r.kt)("h2",{id:"incremental-table-models"},"Incremental table models"),(0,r.kt)("p",null,"dbt-athena supports ",(0,r.kt)("a",{parentName:"p",href:"https://docs.getdbt.com/docs/build/incremental-models"},"incremental models"),". These strategies are supported:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"insert_overwrite")," (default): The insert overwrite strategy deletes the overlapping partitions from the destination table, and then inserts the new records from the source. This strategy depends on the ",(0,r.kt)("inlineCode",{parentName:"li"},"partitioned_by")," keyword! If no partitions are defined, dbt will fall back to the ",(0,r.kt)("inlineCode",{parentName:"li"},"append")," strategy."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"append"),": Insert new records without updating, deleting or overwriting any existing data. There might be duplicate data (e.g. great for log or historical data)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"merge"),": Conditionally updates, deletes, or inserts rows into an Iceberg table. Used in combination with ",(0,r.kt)("inlineCode",{parentName:"li"},"unique_key"),". \u26a0\ufe0f Only available when using ",(0,r.kt)("a",{parentName:"li",href:"docs/configuration/materializations/iceberg"},"Iceberg"),".")),(0,r.kt)("h3",{id:"on-schema-change"},"On schema change"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"on_schema_change")," is an option to reflect changes of schema in incremental models.\nThe following options are supported:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ignore")," (default)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fail")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"append_new_columns")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"sync_all_columns"))),(0,r.kt)("p",null,"In detail, please refer to ",(0,r.kt)("a",{parentName:"p",href:"https://docs.getdbt.com/docs/build/incremental-models#what-if-the-columns-of-my-incremental-model-change"},"dbt docs"),"."))}g.isMDXComponent=!0},9482:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>d,toc:()=>m});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=["components"],l={title:"Contributing",id:"contributing"},s=void 0,d={unversionedId:"docs/contributing/contributing",id:"docs/contributing/contributing",title:"Contributing",description:"",source:"@site/docs/docs/contributing/contributing.md",sourceDirName:"docs/contributing",slug:"/docs/contributing/",permalink:"/pr-preview/pr-2/docs/contributing/",draft:!1,editUrl:"https://github.com/dbt-athena/dbt-athena.github.io/edit/current/docs/docs/contributing/contributing.md",tags:[],version:"current",lastUpdatedAt:1682711864,formattedLastUpdatedAt:"Apr 28, 2023",frontMatter:{title:"Contributing",id:"contributing"},sidebar:"docs",previous:{title:"Known issues",permalink:"/pr-preview/pr-2/docs/known-issues"}},c={},m=[],u={toc:m},p="wrapper";function g(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}))}g.isMDXComponent=!0},6020:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>d,toc:()=>m});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=["components"],l={title:"Athena quickstart",id:"athena-quickstart"},s=void 0,d={unversionedId:"docs/getting-started/athena-quickstart",id:"docs/getting-started/athena-quickstart",title:"Athena quickstart",description:"",source:"@site/docs/docs/getting-started/athena-quickstart.md",sourceDirName:"docs/getting-started",slug:"/docs/getting-started/athena-quickstart",permalink:"/pr-preview/pr-2/docs/getting-started/athena-quickstart",draft:!1,editUrl:"https://github.com/dbt-athena/dbt-athena.github.io/edit/current/docs/docs/getting-started/athena-quickstart.md",tags:[],version:"current",lastUpdatedAt:1682711864,formattedLastUpdatedAt:"Apr 28, 2023",frontMatter:{title:"Athena quickstart",id:"athena-quickstart"}},c={},m=[],u={toc:m},p="wrapper";function g(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}))}g.isMDXComponent=!0},9641:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>d,toc:()=>m});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=["components"],l={title:"Installing dbt-athena",id:"installation",sidebar_label:"Installation"},s=void 0,d={unversionedId:"docs/getting-started/installation",id:"docs/getting-started/installation",title:"Installing dbt-athena",description:"Prerequisites",source:"@site/docs/docs/getting-started/installation.md",sourceDirName:"docs/getting-started",slug:"/docs/getting-started/installation",permalink:"/pr-preview/pr-2/docs/getting-started/installation",draft:!1,editUrl:"https://github.com/dbt-athena/dbt-athena.github.io/edit/current/docs/docs/getting-started/installation.md",tags:[],version:"current",lastUpdatedAt:1682711864,formattedLastUpdatedAt:"Apr 28, 2023",frontMatter:{title:"Installing dbt-athena",id:"installation",sidebar_label:"Installation"},sidebar:"docs",previous:{title:"IAM permissions",permalink:"/pr-preview/pr-2/docs/getting-started/prerequisites/iam-permissions"},next:{title:"Table configuration",permalink:"/pr-preview/pr-2/docs/configuration/table-configuration"}},c={},m=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Install dbt-athena",id:"install-dbt-athena",level:2},{value:"Configuring dbt-athena",id:"configuring-dbt-athena",level:3}],u={toc:m},p="wrapper";function g(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Installed dbt Core using the ",(0,r.kt)("a",{parentName:"li",href:"https://docs.getdbt.com/docs/core/installation"},"installation instructions")," for your operating system + a dbt project initialized."),(0,r.kt)("li",{parentName:"ul"},"A working Athena setup. See ",(0,r.kt)("a",{parentName:"li",href:"docs/getting-started/athena-quickstart"},"Athena quickstart"),".")),(0,r.kt)("h2",{id:"install-dbt-athena"},"Install dbt-athena"),(0,r.kt)("p",null,"Pip is the easiest way to install the ",(0,r.kt)("a",{parentName:"p",href:"https://pypi.org/project/dbt-athena-community/"},"dbt-athena-community package")," in your dbt project:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-terminal"},"pip install dbt-athena-community\n")),(0,r.kt)("h3",{id:"configuring-dbt-athena"},"Configuring dbt-athena"),(0,r.kt)("p",null,"A dbt profile can be configured in the ",(0,r.kt)("inlineCode",{parentName:"p"},"profiles.yml")," to run against AWS Athena using the following configuration:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Required?"),(0,r.kt)("th",{parentName:"tr",align:null},"Example"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"s3_staging_dir")),(0,r.kt)("td",{parentName:"tr",align:null},"S3 location to store Athena query results and metadata"),(0,r.kt)("td",{parentName:"tr",align:null},"Required"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"s3://bucket/dbt/"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"s3_data_dir")),(0,r.kt)("td",{parentName:"tr",align:null},"Prefix for storing tables, if different from the connection's ",(0,r.kt)("inlineCode",{parentName:"td"},"s3_staging_dir")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"s3://bucket2/dbt/"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"s3_data_naming")),(0,r.kt)("td",{parentName:"tr",align:null},"How to generate table paths in ",(0,r.kt)("inlineCode",{parentName:"td"},"s3_data_dir"),". Default: ",(0,r.kt)("inlineCode",{parentName:"td"},"schema_table_unique"),". See ",(0,r.kt)("a",{parentName:"td",href:"docs/configuration/table-configuration"},"Table Configuration")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"schema_table_unique"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"region_name")),(0,r.kt)("td",{parentName:"tr",align:null},"AWS region of your Athena instance"),(0,r.kt)("td",{parentName:"tr",align:null},"Required"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"eu-central-1"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"schema")),(0,r.kt)("td",{parentName:"tr",align:null},"Specify the schema (Athena database) to build models into (lowercase ",(0,r.kt)("strong",{parentName:"td"},"only"),")"),(0,r.kt)("td",{parentName:"tr",align:null},"Required"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"dbt"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"database")),(0,r.kt)("td",{parentName:"tr",align:null},"Specify the database (Data catalog) to build models into (lowercase ",(0,r.kt)("strong",{parentName:"td"},"only"),")"),(0,r.kt)("td",{parentName:"tr",align:null},"Required"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"awsdatacatalog"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"poll_interval")),(0,r.kt)("td",{parentName:"tr",align:null},"Interval in seconds to use for polling the status of query results in Athena. Default: ",(0,r.kt)("inlineCode",{parentName:"td"},"1")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"5"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"aws_profile_name")),(0,r.kt)("td",{parentName:"tr",align:null},"Profile to use from your AWS shared credentials file."),(0,r.kt)("td",{parentName:"tr",align:null},"Optional"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"my-profile"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"aws_access_key_id")),(0,r.kt)("td",{parentName:"tr",align:null},"AWS access key to sign AWS API requests. This is optional, as ",(0,r.kt)("a",{parentName:"td",href:"https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html"},"credentials are determined automatically based on the aws cli and boto3 conventions")," and stored login info."),(0,r.kt)("td",{parentName:"tr",align:null},"Optional"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"AKIAIOSFODNN7EXAMPLE"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"aws_secret_access_key")),(0,r.kt)("td",{parentName:"tr",align:null},"AWS secret access key to sign AWS API requests. This is optional, as ",(0,r.kt)("a",{parentName:"td",href:"https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html"},"credentials are determined automatically based on the aws cli and boto3 conventions")," and stored login info."),(0,r.kt)("td",{parentName:"tr",align:null},"Optional"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"my-profile"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"work_group")),(0,r.kt)("td",{parentName:"tr",align:null},"Identifier of Athena workgroup"),(0,r.kt)("td",{parentName:"tr",align:null},"Optional"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"my-custom-workgroup"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"num_retries")),(0,r.kt)("td",{parentName:"tr",align:null},"Number of times to retry a failing query. Default: ",(0,r.kt)("inlineCode",{parentName:"td"},"5")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"3"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"lf_tags")),(0,r.kt)("td",{parentName:"tr",align:null},"LF tags to apply to any database created by dbt"),(0,r.kt)("td",{parentName:"tr",align:null},"Optional"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},'{"origin": "dbt", "team": "analytics"}'))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example profiles.yml entry:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"athena:\n  target: dev\n  outputs:\n    dev:\n      type: athena\n      work_group: primary\n      s3_staging_dir: s3://aws-athena-query-results/dbt/\n      s3_data_dir: s3://your_s3_bucket/dbt/\n      s3_data_naming: schema_table_unique\n      region_name: eu-central-1\n      database: awsdatacatalog\n      schema: dbt\n      aws_profile_name: my-profile\n      lf_tags:\n        origin: dbt\n        team: analytics\n      threads: 8\n")),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Additional information")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"threads")," is supported"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"database")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"catalog")," can be used interchangeably")))}g.isMDXComponent=!0},4047:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>d,toc:()=>m});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=["components"],l={title:"AWS resources",id:"aws-resources"},s=void 0,d={unversionedId:"docs/getting-started/prerequisites/aws-resources",id:"docs/getting-started/prerequisites/aws-resources",title:"AWS resources",description:"To get started, you will need an S3 bucket, for instance my-bucket, and an Athena database:",source:"@site/docs/docs/getting-started/prerequisites/aws-resources.md",sourceDirName:"docs/getting-started/prerequisites",slug:"/docs/getting-started/prerequisites/aws-resources",permalink:"/pr-preview/pr-2/docs/getting-started/prerequisites/aws-resources",draft:!1,editUrl:"https://github.com/dbt-athena/dbt-athena.github.io/edit/current/docs/docs/getting-started/prerequisites/aws-resources.md",tags:[],version:"current",lastUpdatedAt:1682711864,formattedLastUpdatedAt:"Apr 28, 2023",frontMatter:{title:"AWS resources",id:"aws-resources"},sidebar:"docs",previous:{title:"Introduction",permalink:"/pr-preview/pr-2/"},next:{title:"IAM permissions",permalink:"/pr-preview/pr-2/docs/getting-started/prerequisites/iam-permissions"}},c={},m=[],u={toc:m},p="wrapper";function g(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"To get started, you will need an S3 bucket, for instance ",(0,r.kt)("inlineCode",{parentName:"p"},"my-bucket"),", and an Athena database:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE DATABASE IF NOT EXISTS analytics_dev\nCOMMENT 'Analytics models generated by dbt (development)'\nLOCATION 's3://my-bucket/'\nWITH DBPROPERTIES ('creator'='Foo Bar', 'email'='foo@bar.com');\n")),(0,r.kt)("p",null,"If the database does not exist, then dbt will attempt to create it automatically."),(0,r.kt)("admonition",{title:"AWS Glue",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"You can also use ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/athena/latest/ug/glue-athena.html"},"AWS Glue")," to create and manage your Athena databases.")))}g.isMDXComponent=!0},4632:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>d,toc:()=>m});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=["components"],l={title:"IAM permissions",id:"iam-permissions"},s=void 0,d={unversionedId:"docs/getting-started/prerequisites/iam-permissions",id:"docs/getting-started/prerequisites/iam-permissions",title:"IAM permissions",description:"Athena IAM permissions",source:"@site/docs/docs/getting-started/prerequisites/iam-permissions.md",sourceDirName:"docs/getting-started/prerequisites",slug:"/docs/getting-started/prerequisites/iam-permissions",permalink:"/pr-preview/pr-2/docs/getting-started/prerequisites/iam-permissions",draft:!1,editUrl:"https://github.com/dbt-athena/dbt-athena.github.io/edit/current/docs/docs/getting-started/prerequisites/iam-permissions.md",tags:[],version:"current",lastUpdatedAt:1682711864,formattedLastUpdatedAt:"Apr 28, 2023",frontMatter:{title:"IAM permissions",id:"iam-permissions"},sidebar:"docs",previous:{title:"AWS resources",permalink:"/pr-preview/pr-2/docs/getting-started/prerequisites/aws-resources"},next:{title:"Installation",permalink:"/pr-preview/pr-2/docs/getting-started/installation"}},c={},m=[{value:"Athena IAM permissions",id:"athena-iam-permissions",level:2},{value:"Glue IAM permissions",id:"glue-iam-permissions",level:2},{value:"S3 IAM permissions",id:"s3-iam-permissions",level:2},{value:"Lake Formation",id:"lake-formation",level:2}],u={toc:m},p="wrapper";function g(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"athena-iam-permissions"},"Athena IAM permissions"),(0,r.kt)("p",null,"Athena permissions that are required to run queries:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"athena:StartQueryExecution",\n"athena:GetQueryResults",\n"athena:GetWorkGroup",\n"athena:StopQueryExecution",\n"athena:GetQueryExecution",\n')),(0,r.kt)("h2",{id:"glue-iam-permissions"},"Glue IAM permissions"),(0,r.kt)("p",null,"dbt-athena uses the AWS Glue API to fetch metadata. You will need to set these permissions on the Glue databases you are reading from:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"glue:GetDatabase",\n"glue:GetDatabases",\n"glue:GetTable",\n"glue:GetTables",\n"glue:GetPartition",\n"glue:GetPartitions",\n')),(0,r.kt)("p",null,"You will need these permissions on the glue databases you are writing to:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"glue:GetDatabase",\n"glue:GetDatabases",\n"glue:GetTable",\n"glue:GetTables",\n"glue:GetPartition",\n"glue:GetPartitions",\n"glue:BatchCreatePartition",\n"glue:BatchUpdatePartition",\n"glue:BatchDeletePartition",\n"glue:BatchDeleteTable",\n"glue:BatchDeleteTableVersion",\n"glue:CreatePartition",\n"glue:UpdatePartition",\n"glue:DeletePartition",\n"glue:CreateTable",\n"glue:UpdateTable",\n"glue:DeleteTable",\n"glue:DeleteTableVersion",\n')),(0,r.kt)("h2",{id:"s3-iam-permissions"},"S3 IAM permissions"),(0,r.kt)("p",null,"You will need these permissions on the S3 buckets that dbt-athena reads from:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"s3:GetObject",\n"s3:GetBucketLocation",\n"s3:ListBucket",\n"s3:ListBucketMultipartUploads",\n"s3:ListMultipartUploadParts",\n')),(0,r.kt)("p",null,"You will need these permissions on the S3 buckets you are writing to (buckets defined in ",(0,r.kt)("inlineCode",{parentName:"p"},"s3_staging_dir")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"s3_data_dir"),"):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"s3:GetObject",\n"s3:GetBucketLocation",\n"s3:ListBucket",\n"s3:ListBucketMultipartUploads",\n"s3:ListMultipartUploadParts",\n"s3:AbortMultipartUpload",\n"s3:PutObject",\n"s3:DeleteObject",\n')),(0,r.kt)("p",null,"If your buckets are encrypted using KMS, you will need these permissions on every KMS key of the buckets:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"kms:GenerateDataKey*",\n"kms:DescribeKey",\n"kms:Decrypt",\n')),(0,r.kt)("h2",{id:"lake-formation"},"Lake Formation"),(0,r.kt)("p",null,"If you are using databases managed by AWS Lake Formation, then you need to set these permissions on the role.:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"lakeformation:GetDataAccess",\n')))}g.isMDXComponent=!0},2057:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>d,toc:()=>m});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=["components"],l={title:"What is dbt-athena?",id:"introduction",sidebar_label:"Introduction",slug:"/"},s=void 0,d={unversionedId:"docs/introduction",id:"docs/introduction",title:"What is dbt-athena?",description:"dbt-athena is a community-owned adapter for dbt Core. The dbt-athena package contains all the code to enable dbt to work with AWS Athena and transform data using SQL.",source:"@site/docs/docs/introduction.md",sourceDirName:"docs",slug:"/",permalink:"/pr-preview/pr-2/",draft:!1,editUrl:"https://github.com/dbt-athena/dbt-athena.github.io/edit/current/docs/docs/introduction.md",tags:[],version:"current",lastUpdatedAt:1682711864,formattedLastUpdatedAt:"Apr 28, 2023",frontMatter:{title:"What is dbt-athena?",id:"introduction",sidebar_label:"Introduction",slug:"/"},sidebar:"docs",next:{title:"AWS resources",permalink:"/pr-preview/pr-2/docs/getting-started/prerequisites/aws-resources"}},c={},m=[{value:"Features of dbt-athena",id:"features-of-dbt-athena",level:2}],u={toc:m},p="wrapper";function g(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"dbt-athena is a community-owned adapter for dbt Core. The dbt-athena package contains all the code to enable dbt to work with ",(0,r.kt)("a",{parentName:"p",href:"https://aws.amazon.com/athena/"},"AWS Athena")," and transform data using SQL."),(0,r.kt)("p",null,"In essence, the dbt-athena adapter will transform existing data in Athena by leveraging the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/athena/latest/ug/create-table-as.html"},(0,r.kt)("inlineCode",{parentName:"a"},"CREATE TABLE AS"))," or ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/athena/latest/ug/create-view.html"},(0,r.kt)("inlineCode",{parentName:"a"},"CREATE VIEW"))," SQL queries in AWS Athena."),(0,r.kt)("h2",{id:"features-of-dbt-athena"},"Features of dbt-athena"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u2705 Supports dbt version ",(0,r.kt)("inlineCode",{parentName:"li"},"1.4.*")),(0,r.kt)("li",{parentName:"ul"},"\u2705 Supports ",(0,r.kt)("a",{parentName:"li",href:"https://docs.getdbt.com/docs/building-a-dbt-project/seeds"},"dbt seeds")),(0,r.kt)("li",{parentName:"ul"},"\u2705 Supports ",(0,r.kt)("a",{parentName:"li",href:"https://docs.getdbt.com/docs/build/snapshots"},"dbt snapshots")),(0,r.kt)("li",{parentName:"ul"},"\u2705 Supports ",(0,r.kt)("a",{parentName:"li",href:"https://docs.getdbt.com/docs/build/materializations#table"},"table materialization")," using Hive tables (Athena v2/v3) and ",(0,r.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/athena/latest/ug/querying-iceberg.html"},"Iceberg tables")," (Athena v3)"),(0,r.kt)("li",{parentName:"ul"},"\u2705 Supports ",(0,r.kt)("a",{parentName:"li",href:"https://docs.getdbt.com/docs/build/incremental-models"},"incremental models")," for Iceberg (",(0,r.kt)("inlineCode",{parentName:"li"},"merge")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"append"),") and Hive tables (",(0,r.kt)("inlineCode",{parentName:"li"},"insert_overwrite")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"append"),").")),(0,r.kt)("p",null,"Not supported yet: ",(0,r.kt)("a",{parentName:"p",href:"https://docs.getdbt.com/docs/build/python-models#configuring-python-models"},"Python models"),", ",(0,r.kt)("a",{parentName:"p",href:"https://docs.getdbt.com/reference/resource-configs/persist_docs"},"persist docs")," for views."))}g.isMDXComponent=!0},7526:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>d,toc:()=>m});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=["components"],l={title:"Known issues",id:"known-issues"},s=void 0,d={unversionedId:"docs/known-issues",id:"docs/known-issues",title:"Known issues",description:"",source:"@site/docs/docs/known-issues.md",sourceDirName:"docs",slug:"/docs/known-issues",permalink:"/pr-preview/pr-2/docs/known-issues",draft:!1,editUrl:"https://github.com/dbt-athena/dbt-athena.github.io/edit/current/docs/docs/known-issues.md",tags:[],version:"current",lastUpdatedAt:1682711864,formattedLastUpdatedAt:"Apr 28, 2023",frontMatter:{title:"Known issues",id:"known-issues"},sidebar:"docs",previous:{title:"Snapshots",permalink:"/pr-preview/pr-2/docs/configuration/snapshots"},next:{title:"Contributing",permalink:"/pr-preview/pr-2/docs/contributing/"}},c={},m=[],u={toc:m},p="wrapper";function g(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}))}g.isMDXComponent=!0}}]);